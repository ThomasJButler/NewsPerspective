# NewsPerspective Dashboards

Two Streamlit dashboards for browsing news and analysing system performance.

## Web App - News Browser

Interactive interface for searching and browsing rewritten news articles.

**Features:**
- Search articles by keywords
- Filter by source, tone, and date
- View original vs rewritten headlines side-by-side
- Confidence scoring and rewrite reasons
- Clean, responsive interface

**Run:**

```bash
streamlit run web_app.py
```

Access at http://localhost:8501

## Analytics Dashboard

Comprehensive analytics and visualisations for monitoring system performance.

**Features:**
- **Source Reliability Analysis**: Track clickbait scores and reliability ratings per news source
- **Clickbait Pattern Analysis**: Identify common clickbait patterns and their frequency
- **Performance Metrics**: Monitor processing volume, success rates, and API usage
- Interactive Plotly charts and visualisations
- Real-time data from source_reliability.json

**Run:**

```bash
streamlit run analytics_dashboard.py
```

Access at http://localhost:8502

## Running Both Dashboards

Run simultaneously on different ports:

```bash
# Terminal 1 - News Browser
streamlit run web_app.py --server.port 8501

# Terminal 2 - Analytics Dashboard
streamlit run analytics_dashboard.py --server.port 8502
```

## Configuration

Both dashboards require:
- Valid Azure Search credentials in `.env`
- Processed articles in Azure Search index
- For analytics: `data/source_reliability.json` generated by clickbait detector

## Deployment

### Streamlit Cloud

1. Push repository to GitHub
2. Go to https://share.streamlit.io
3. Connect repository and select `web_app.py` or `analytics_dashboard.py`
4. Add secrets in dashboard settings (copy from .env)

### Azure App Service

Deploy as containerised web app:

```bash
# Create App Service plan
az appservice plan create \
  --name news-perspective-plan \
  --resource-group news-perspective-rg \
  --is-linux \
  --sku B1

# Create web app
az webapp create \
  --resource-group news-perspective-rg \
  --plan news-perspective-plan \
  --name news-perspective-web \
  --runtime "PYTHON:3.11"

# Configure startup command
az webapp config set \
  --resource-group news-perspective-rg \
  --name news-perspective-web \
  --startup-file "streamlit run web_app.py --server.port 8000 --server.address 0.0.0.0"

# Deploy
az webapp deployment source config-zip \
  --resource-group news-perspective-rg \
  --name news-perspective-web \
  --src deploy.zip
```

## Screenshots

### Web App - Main Search Interface
- Search bar with filters
- Article cards showing original vs rewritten headlines
- Confidence badges and tone indicators

### Analytics Dashboard - Source Reliability
- Bar charts comparing clickbait scores across sources
- Reliability ratings (Highly Reliable to Unreliable)
- Detailed statistics table

### Analytics Dashboard - Performance Metrics
- Processing volume trends
- Success rate metrics
- API usage statistics

## Customisation

### Styling

Both dashboards use custom CSS. Modify colour schemes in the `st.markdown()` sections:

```python
# Example: Change primary colour
background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
# Change to:
background: linear-gradient(90deg, #00c6ff 0%, #0072ff 100%);
```

### Data Refresh

Analytics dashboard loads data on page load. For auto-refresh:

```python
# Add to analytics_dashboard.py main()
import time
st_autorefresh = st.experimental_rerun

# Refresh every 5 minutes
time.sleep(300)
st_autorefresh()
```

### Custom Metrics

Add custom metrics to performance page in `analytics_dashboard.py`:

```python
# In render_performance_metrics_page()
st.metric("Custom Metric", "value", "delta")
```

## Troubleshooting

**Port already in use:**
```bash
streamlit run web_app.py --server.port 8503
```

**Module not found:**
```bash
pip install -r requirements.txt
```

**Azure Search connection error:**
- Verify credentials in .env
- Check network connectivity to Azure
- Validate index name exists

**No analytics data:**
- Run batch_processor.py or run.py first
- Verify data/source_reliability.json exists
- Check file permissions

## Performance

- Web app loads 20 articles per search by default
- Analytics dashboard caches data for 5 minutes
- Both apps are lightweight (<100MB memory)
- Suitable for deployment on free tiers (Streamlit Cloud, Azure App Service Free)
